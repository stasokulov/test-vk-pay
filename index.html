<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>vk-pay</title>
    <script src="https://vk.com/js/api/openapi.js?168" type="text/javascript"></script>
  </head>
  <body>
    Тест кнопки vk-pay
    <button>Кнопка</button>
    
    <script type="text/javascript">
      VK.init({
        apiId: 7578482
      });
      
      VK.Auth.login(function(response) {
        if (response.session) {
          /* Пользователь успешно авторизовался */
          console.log('Пользователь успешно авторизовался');
          console.log('response.session:');
          console.log(response.session);
          if (response.settings) {
            /* Выбранные настройки доступа пользователя, если они были запрошены */
            console.log('Выбранные настройки доступа пользователя, если они были запрошены');
            console.log('response.settings:');
            console.log(response.settings);
          }
        } else {
          /* Пользователь нажал кнопку Отмена в окне авторизации */
        }
      });
      
      VK.App.open('vkpay',
        {
         "amount": 1.5,
         "data": {
          "currency": "RUB",
          "merchant_data": "eyJvcmRlcl9pZCI6IjI1NTMxIiwidHMiOiIxNTM5MzI5NzcwIiwiYW1vdW50IjoxLjUsImN1cnJlbmN5IjoiUlVCIn0=",
          "merchant_sign": "63d5dce9d2c9d29198ba12ba3f8e270e6606a221",
                        "order_id": "25531",
          "ts": "1539329770"
                },
         "description": "Test Payment",
         "action": "pay-to-service",
         "merchant_id": 617001,
                "version": 2,
         "sign": "818964335a550e39d9a1dd0d752e60ab"
        }
      );
    </script>
  </body>
</html>
